{% extends "base.html" %}

{% block content %}
{% if current_path and current_path != '' %}
    <h1>{{ current_path.split('/')[-1] if '/' in current_path else current_path }}</h1>
{% endif %}

{% if index_content and content_position == 'top' %}
<section class="directory-intro">
    {{ index_content.content | safe }}
</section>
{% endif %}

{% if items %}
<section class="directory-listing">
    <h3>Contents</h3>
    <ul>
        {% for item in items %}
        <li data-icon="{% if item.is_dir %}📁{% elif item.is_markdown %}📝{% elif item.is_image %}🖼️{% else %}📄{% endif %}">
            <a href="{{ item.url_path }}">
                {{ item.display_name }}{% if item.is_dir %}/{% endif %}
            </a>
            {% if not item.is_dir %}
                <span class="item-date">{{ item.modified.strftime('%Y-%m-%d') }}</span>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</section>
{% else %}
<section class="empty-directory">
    <p><em>This directory is empty.</em></p>
</section>
{% endif %}

{% if index_content and content_position == 'bottom' %}
<section class="directory-description">
    <h3>About This Directory</h3>
    {{ index_content.content | safe }}
</section>
{% endif %}
{% endblock %}