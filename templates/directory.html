{% extends "base.html" %}

{% block content %}
{% if current_path and current_path != '' %}
    <div style="text-align: center; color: #777; font-size: 0.9rem; font-style: italic; margin-bottom: 3rem;">
        {{ current_path }}
    </div>
{% endif %}

{% if index_content and content_position == 'top' %}
<section class="directory-intro">
    {{ index_content.content | safe }}
</section>
{% endif %}

{% if items %}
<section class="directory-listing">
    <h3>Contents</h3>
    <ul>
        {% for item in items %}
        <li>
            <a href="{{ item.url_path }}">
                {% if item.is_dir %}📁{% elif item.is_markdown %}📝{% elif item.is_image %}🖼️{% else %}📄{% endif %}
                {{ item.display_name }}{% if item.is_dir %}/{% endif %}
            </a>
            {% if not item.is_dir %}
                <span class="item-date">{{ item.modified.strftime('%Y-%m-%d') }}</span>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</section>
{% else %}
<section class="empty-directory">
    <p><em>This directory is empty.</em></p>
</section>
{% endif %}

{% if index_content and content_position == 'bottom' %}
<section class="directory-description">
    <h3>About This Directory</h3>
    {{ index_content.content | safe }}
</section>
{% endif %}
{% endblock %}