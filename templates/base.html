<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{% block title %}{{ title }} - Kenneth Reitz{% endblock %}</title>

        <!-- SEO and Meta -->
        <meta name="description" content="{% block description %}Kenneth Reitz - Creator of Requests and Certifi, trusted by millions of developers worldwide. Thoughts on technology, philosophy, and building software for humans.{% endblock %}" />
        <meta name="author" content="Kenneth Reitz" />

        <!-- OpenGraph -->
        <meta property="og:title" content="{% block og_title %}{{ title }} - Kenneth Reitz{% endblock %}" />
        <meta property="og:description" content="{% block og_description %}Creator of Requests and Certifi - libraries trusted by millions of developers worldwide{% endblock %}" />
        <meta property="og:type" content="{% block og_type %}website{% endblock %}" />
        <meta property="og:url" content="{% block og_url %}https://kennethreitz.org{% endblock %}" />

        <!-- Twitter Card -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:creator" content="@kennethreitz" />
        <meta name="twitter:title" content="{% block twitter_title %}{{ title }} - Kenneth Reitz{% endblock %}" />
        <meta name="twitter:description" content="{% block twitter_description %}Creator of Requests and Certifi - libraries trusted by millions of developers worldwide{% endblock %}" />

        <!-- Tufte CSS -->
        <link rel="stylesheet" href="/static/tufte/tufte.css" />
        
        <style>
            /* Adjust content width for better sidenote spacing */
            section > p,
            section > footer,
            section > table,
            section > blockquote,
            p,
            blockquote,
            .post-content > p,
            .post-content > blockquote,
            .post-content > ul,
            .post-content > ol {
                width: 55%;
            }
            
            section > dl,
            section > ol,
            section > ul,
            .post-content > dl {
                width: 50%;
            }
            
            /* Override for full-width elements when needed */
            .post-content > h1,
            .post-content > h2,
            .post-content > h3,
            .post-content > h4,
            .post-content > h5,
            .post-content > h6 {
                width: 100%;
            }
            
            .sidenote,
            .marginnote {
                width: 38%;
                margin-right: -42%;
                margin-left: 2%;
            }
            
            /* Responsive adjustments */
            @media (max-width: 1400px) {
                section > p,
                section > footer,
                section > table,
                section > blockquote,
                p,
                blockquote,
                .post-content > p,
                .post-content > blockquote,
                .post-content > ul,
                .post-content > ol {
                    width: 60%;
                }
                
                .sidenote,
                .marginnote {
                    width: 33%;
                    margin-right: -37%;
                    margin-left: 2%;
                }
            }
            
            @media (max-width: 1200px) {
                section > p,
                section > footer,
                section > table,
                section > blockquote,
                p,
                blockquote,
                .post-content > p,
                .post-content > blockquote,
                .post-content > ul,
                .post-content > ol {
                    width: 70%;
                }
                
                .sidenote,
                .marginnote {
                    width: 33%;
                    margin-right: -37%;
                    margin-left: 2%;
                }
            }
            
            /* Breadcrumb styling */
            .breadcrumbs {
                font-size: 0.875rem;
                color: #666;
                margin: 1rem 0 2rem 0;
                font-family: et-book, Palatino, "Palatino Linotype", "Palatino LT STD", "Book Antiqua", Georgia, serif;
            }
            
            .breadcrumbs a {
                color: #666;
                text-decoration: none;
                background: none;
                text-shadow: none;
            }
            
            .breadcrumbs a:hover {
                color: #111;
            }
            
            .breadcrumb-separator {
                margin: 0 0.5rem;
                color: #999;
            }
            
            
            /* Mobile breadcrumb adjustments */
            @media (max-width: 760px) {
                .breadcrumbs {
                    font-size: 0.8rem;
                    margin: 0.75rem 0 1.5rem 0;
                }
                
                .breadcrumb-separator {
                    margin: 0 0.25rem;
                }
            }
            
            /* Homepage subtitle spacing adjustment */
            p.subtitle {
                line-height: 1.6;
            }
            
            /* Navigation spacing adjustment */
            header nav a {
                margin-right: 1rem;
            }
            
            header nav a:last-child {
                margin-right: 0;
            }
            
            /* Directory listing styling */
            .directory-listing ul {
                list-style: none;
                padding-left: 0;
                font-size: 0.95rem;
                line-height: 1.8;
            }
            
            .directory-listing li {
                margin-bottom: 0.75rem;
                padding-left: 2rem;
                position: relative;
                font-family: et-book, Palatino, "Palatino Linotype", "Palatino LT STD", "Book Antiqua", Georgia, serif;
            }
            
            .directory-listing li::before {
                content: attr(data-icon);
                position: absolute;
                left: 0;
                color: #666;
                font-size: 0.9rem;
            }
            
            .directory-listing a {
                color: #444;
                text-decoration: none;
                font-weight: 400;
                background: none;
                text-shadow: none;
                transition: color 0.2s ease;
            }
            
            .directory-listing a:hover {
                color: #111;
            }
            
            .item-date {
                font-size: 0.8rem;
                color: #888;
                font-style: italic;
                margin-left: 0.75rem;
                font-variant: small-caps;
                letter-spacing: 0.02em;
            }
            
            .directory-listing h3 {
                font-size: 1.3rem;
                color: #333;
                font-weight: 400;
                font-style: italic;
                margin-bottom: 1.5rem;
                margin-top: 2.5rem;
            }
            
            /* Fix HR lines intersecting with footnotes */
            hr {
                width: 55%;
                margin: 2rem 0;
                border: none;
                border-top: 1px solid #ccc;
            }
            
            /* Fix iframe overflow into sidenotes */
            iframe {
                max-width: 55% !important;
                width: 100%;
                box-sizing: border-box;
            }
            
            @media (max-width: 1400px) {
                hr {
                    width: 60%;
                }
                
                iframe {
                    max-width: 60% !important;
                }
            }
            
            @media (max-width: 1200px) {
                hr {
                    width: 70%;
                }
                
                iframe {
                    max-width: 70% !important;
                }
            }
            
            @media (max-width: 760px) {
                iframe {
                    max-width: 100% !important;
                }
            }
        </style>


        {% block extra_head %}{% endblock %}

        <!-- Analytics -->
        <script type="text/javascript">
          var _gauges = _gauges || [];
          (function() {
            var t   = document.createElement('script');
            t.type  = 'text/javascript';
            t.async = true;
            t.id    = 'gauges-tracker';
            t.setAttribute('data-site-id', '65529a9abd1a3b3101979d52');
            t.setAttribute('data-track-path', 'https://track.gaug.es/track.gif');
            t.src = 'https://d2fuc4clr7gvcn.cloudfront.net/track.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(t, s);
          })();
        </script>
    </head>
    <body>
        <article>
            <header>
                <nav>
                    <a href="/">Home</a>
                    <a href="/directory">Directory</a>
                    <a href="/software">Software</a>
                    <a href="/essays">Essays</a>
                    <a href="/artificial-intelligence">AI</a>
                    <a href="/talks">Talks</a>
                    <a href="/values">Values</a>
                </nav>
                
                {% if current_path or breadcrumbs %}
                <div class="breadcrumbs">
                    <a href="/">Home</a>
                    {% if breadcrumbs %}
                        {% for crumb in breadcrumbs %}
                            <span class="breadcrumb-separator">›</span>
                            <a href="{{ crumb.url }}">{{ crumb.name }}</a>
                        {% endfor %}
                    {% elif current_path %}
                        {% set path_parts = current_path.strip('/').split('/') %}
                        {% for part in path_parts if part %}
                            <span class="breadcrumb-separator">›</span>
                            {% set partial_path = '/' + path_parts[:loop.index]|join('/') %}
                            <a href="{{ partial_path }}">{{ part }}</a>
                        {% endfor %}
                    {% endif %}
                </div>
                {% endif %}
            </header>

            <main>
                {% block content %}{% endblock %}
            </main>

            <footer>
                <div class="footer-content">
                    <div class="footer-links">
                        <a href="https://github.com/kennethreitz" target="_blank">GitHub</a>
                        <a href="https://twitter.com/kennethreitz42" target="_blank">Twitter</a>
                        <a href="mailto:me@kennethreitz.org">Contact</a>
                        <a href="/sitemap">Sitemap</a>
                    </div>
                    <div class="footer-note">
                        <p>&copy; {{ "now"|strftime("%Y") }} Kenneth Reitz. Made with <a href="https://kjvstudy.org/book/1%20Corinthians/chapter/13">love</a>.</p>
                    </div>
                </div>
            </footer>
        </article>

        {% block extra_scripts %}{% endblock %}

        <!-- Dynamic Color System -->
        <script>
            (function() {
                const colorSchemes = [
                    'scheme-ocean',
                    'scheme-forest',
                    'scheme-sunset',
                    'scheme-lavender',
                    'scheme-rose',
                    'scheme-sage',
                    'scheme-amber',
                    'scheme-steel',
                    'scheme-wine',
                    'scheme-moss'
                ];

                // Get or generate a scheme based on the current page
                let scheme = localStorage.getItem('current-color-scheme');

                // Change scheme occasionally (20% chance on page load)
                if (!scheme || Math.random() < 0.2) {
                    scheme = colorSchemes[Math.floor(Math.random() * colorSchemes.length)];
                    localStorage.setItem('current-color-scheme', scheme);
                }

                // Apply the scheme
                document.body.className = (document.body.className + ' ' + scheme).trim();
            })();
        </script>
    </body>
</html>
