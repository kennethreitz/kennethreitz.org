{% extends "base.html" %}

{% block content %}
<article>
    <header>
        <h1>External Links Index</h1>
        <p class="subtitle">Intellectual influences &mdash; {{ total_count }} external references revealing the web of ideas that inform this work.</p>
    </header>

    <section>
        <p>Every outbound link from across the site, extracted and organized by source. These references map the intellectual territory being explored—from academic papers to tools, from philosophers to fellow travelers on similar journeys.</p>
        
        <hr>

        {% if articles %}
            {% for article in articles %}
                <div class="article-group">
                    <h3 class="article-title">
                        <a href="{{ article.url }}">{{ article.title }}</a>
                    </h3>
                    <div class="article-meta">
                        {{ article.category }}
                        {% if article.date %}
                            &middot; {{ article.date.strftime('%B %Y') if article.date.day == 1 else article.date.strftime('%B %d, %Y') }}
                        {% endif %}
                        &middot; {{ article.external_links|length }} external link{{ 's' if article.external_links|length != 1 else '' }}
                    </div>
                    
                    <div class="links-list">
                        {% for link in article.external_links %}
                            <div class="link-entry">
                                <div class="link-arrow">→</div>
                                <div class="link-target">
                                    <strong><a href="{{ link.url }}" target="_blank" rel="noopener">{{ link.link_text }}</a></strong>
                                    <div class="link-domain">{{ link.domain }}</div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>No external links found across the site.</p>
        {% endif %}
    </section>
</article>

<style>
    .subtitle {
        font-style: italic;
        color: #666;
        margin-top: -1rem;
        margin-bottom: 2rem;
    }


    .article-group {
        margin-bottom: 3rem;
        border-bottom: 1px solid #e0e0e0;
        padding-bottom: 2rem;
    }

    .article-group:last-child {
        border-bottom: none;
    }

    .article-title {
        font-size: 1.4rem;
        margin-bottom: 0.5rem;
    }

    .article-title a {
        color: #333;
        text-decoration: none;
    }

    .article-title a:hover {
        color: #000;
        text-decoration: underline;
    }

    .article-meta {
        font-size: 0.9rem;
        color: #888;
        margin-bottom: 1.5rem;
    }

    .links-list {
        padding-left: 0;
        max-width: 65%;
    }

    .link-entry {
        margin-bottom: 1rem;
        padding: 1rem 1.5rem;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
        background: #fafafa;
        display: flex;
        align-items: flex-start;
        gap: 1rem;
    }

    .link-entry:last-child {
        margin-bottom: 0;
    }

    .link-arrow {
        font-size: 1.2rem;
        color: #666;
        margin-top: 0.1rem;
        font-weight: bold;
    }

    .link-target {
        flex: 1;
    }

    .link-target strong a {
        color: #2563eb;
        text-decoration: none;
        font-size: 1.05rem;
    }

    .link-target strong a:hover {
        color: #1d4ed8;
        text-decoration: underline;
    }

    .link-domain {
        font-size: 0.8rem;
        color: #888;
        font-family: monospace;
        margin-top: 0.3rem;
    }

    @media (max-width: 768px) {
        .links-list {
            max-width: 100%;
        }

        .link-entry {
            flex-direction: column;
            gap: 0.5rem;
            padding: 1rem;
        }

        .link-arrow {
            align-self: center;
            transform: rotate(90deg);
        }

        .link-target {
            flex: none;
        }
    }
</style>
{% endblock %}